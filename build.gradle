plugins {
    id 'java'
    id 'maven-publish'
}

group = 'com.heimdallauth.authguard'
version = '1.0.2'

repositories {
    mavenCentral()
}

dependencies {
    implementation('org.projectlombok:lombok:1.18.20')
    annotationProcessor('org.projectlombok:lombok:1.18.20')
    testImplementation platform('org.junit:junit-bom:5.10.0')
    testImplementation 'org.junit.jupiter:junit-jupiter'
}

test {
    useJUnitPlatform()
}
publishing{
    publications{
        mavenJava(MavenPublication){
            from components.java
        }
    }
    repositories{
        maven{
            name="GithubPackages"
            url='https://maven.pkg.github.com/HeimdallauthSecurity/auth-guard-commons'
            credentials{
                username = project.findProperty('gpr.user') ?: System.getenv("GITHUB_ACTOR")
                password = project.findProperty('gpr.key') ?: System.getenv("GITHUB_TOKEN")
            }
        }
    }
}